generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Product {
  id          String      @id @default(cuid())
  name        String
  description String
  price       Int         // Price in Naira
  category    String      // 'men', 'women', etc.
  image       String
  stock       Int         // Available quantity
  isActive    Boolean     @default(true) // Soft delete
  createdAt   DateTime    @default(now())
  updatedAt   DateTime    @updatedAt
  
  // Relations
  productImages ProductImage[]
  productColors ProductColor[]
  productSizes  ProductSize[]
  orderItems    OrderItem[]
}

model ProductImage {
  id        String   @id @default(cuid())
  url       String
  productId String
  product   Product  @relation(fields: [productId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())
}

model ProductColor {
  id        String   @id @default(cuid())
  name      String
  hexCode   String?  // Optional hex color code
  productId String
  product   Product  @relation(fields: [productId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())
}

model ProductSize {
  id        String   @id @default(cuid())
  name      String   // "S", "M", "L", etc.
  productId String
  product   Product  @relation(fields: [productId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())
}

model Order {
  id             String      @id @default(cuid())
  orderNumber    String      @unique
  customerName   String
  customerEmail  String
  customerPhone  String
  total          Int
  status         String      // 'pending', 'confirmed', 'shipped', 'delivered', 'cancelled'
  deliveryOption String      // 'pickup', 'delivery'
  selectedState  String
  address        String?
  city           String?
  note           String?
  paymentVerified Boolean    @default(false)
  createdAt      DateTime    @default(now())
  updatedAt      DateTime    @updatedAt
  items          OrderItem[]
}

model OrderItem {
  id        String   @id @default(cuid())
  orderId   String
  order     Order    @relation(fields: [orderId], references: [id], onDelete: Cascade)
  productId String
  product   Product  @relation(fields: [productId], references: [id])
  name      String
  price     Int
  quantity  Int
  size      String?
  color     String?
  createdAt DateTime @default(now())
}